<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="code.css">
<link rel="stylesheet" href="main.css">
<link rel="stylesheet" href="icons.css">
<link rel="stylesheet" href="responsive.css">
<link rel="stylesheet" href="projectGrid.css">
<link rel="stylesheet" href="keyframes.css">
</head>
<body>
<div class="flex-cont vertical cont">
<div class="header">korpi.digital</div>

<div class="flex-cont horizontal row-2">
<div class=" menubar " id="manubar">
    <div id="runico"></div>
    <div id="fileico"></div>
    <div id="linkico"></div>
</div>
    <div class="flex-cont vertical main" id="mainId">
        
        <div class="tab">
            <div class="tab1" id="tab1">
                <div><svg id="homeico" width="35px" fill=" #D4D4D4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="48px" height="48px"><path d="M 12 2.0996094 L 1 12 L 4 12 L 4 21 L 11 21 L 11 15 L 13 15 L 13 21 L 20 21 L 20 12 L 23 12 L 12 2.0996094 z M 12 4.7910156 L 18 10.191406 L 18 11 L 18 19 L 15 19 L 15 13 L 9 13 L 9 19 L 6 19 L 6 10.191406 L 12 4.7910156 z"/></svg>
                    <span class="tabtxt1">main</span>
                </div>
              </div>
              <div class="tab2" id="tab2">
                <div><svg id="smallfile" xmlns="http://www.w3.org/2000/svg" width="23.697" height="29.483" viewBox="0 0 23.697 29.483">
                    <g  transform="translate(11.378 -50.017)">
                      <path id="filePath_3" data-name="Path 3" d="M13.716,2H6.159A2.165,2.165,0,0,0,4,4.172V21.544a2.165,2.165,0,0,0,2.159,2.172H19.114a2.165,2.165,0,0,0,2.159-2.172V9.6Z" transform="translate(-13.878 54.283)" fill="none" stroke="#d4d4d4" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"/>
                      <rect id="filePath_4" data-name="Rectangle 1" width="16" height="22" transform="translate(-5.181 50.017)" fill="#1e1e1e"/>
                      <path id="filePath_1" data-name="Path 1" d="M12.809,2H5.958A2.034,2.034,0,0,0,4,4.1V20.924a2.034,2.034,0,0,0,1.958,2.1H17.7a2.034,2.034,0,0,0,1.958-2.1V9.359Z" transform="translate(-8.842 49.973)" fill="none" stroke="#d4d4d4" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"/>
                      <path id="filePath_2" data-name="Path 2" d="M13,2V9.824h6.906" transform="translate(-10.889 50.117)" fill="none" stroke="#d4d4d4" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"/>
                    </g>
                  </svg>
                  <span class="tabtxt2">projects</span></div>
              </div>
              <div class="tabback" id="tabback"></div>
        </div>
        
        <div class="flex-cont horizontal mobile">
            <div class="menuopen" id="menuopen">
                <div class="firsthalf">
                <div id="projectheader">
                    <div id="explorertxt">EXPLORER</div>
                    <div class="firsttitle maintitle">PROJECTS</div>
                </div>
                
                <ul class="projectlist">
                    <li id="lip1" class="project1 list"><span class="listItem">IoT table tennis</span></li>
                    <li id="lip2" class="project2 list"><span class="listItem">AI table tennis</span> </li>
                    <li id="lip3" class="project3 list"><span class="listItem">IoT scale for waste bins</span></li>
                    <li id="lip4" class="project4 list"><span class="listItem">Android dataset recorder</span></li>
                    <li id="lip5" class="project5 list"><span class="listItem">AI Voice commands</span></li>
                    <li id="lip6" class="project6 list"><span class="listItem">My website</span></li>
                    <li id="lip7" class="project7 list"><span class="listItem">Customer website 1</span></li>     
                </ul>
                
                </div>
                <div class="secondhalf">
                    <div class="secondtitle maintitle">CATEGORIES</div>
                    <ul class="projectlist">
                        <li><span class="listItem">IoT</span></li>
                        <li><span class="listItem">Machine learning</span> </li>
                        <li><span class="listItem">Mobile development</span></li>
                        <li><span class="listItem">Web development</span></li>
                        <li><span class="listItem">Published papers</span></li>
                        <li><span class="listItem">Customer work</span></li>
                    </ul>
                </div>
                
            </div> 
            <div class="aside" id="aside">
                <div class="me"></div>
                <div class="flex-cont horizontal code">
                    <div class="rownum" id="rownum"></div> 
                    <div class="codetxt">
                        <div id="importxt">
                        <span class="purple">import</span>
                        <span class="lightblue">tuomas</span>
                        <span class="purple">from</span>
                        <span class="brown">'./developers'</span>;
                        </div>
                        <div id="commenttxt">
                        <span class="green">// Tuomas Korpi <br>
                            // Developer, Designer, Engineer</span>
                        </div>
                        <div id="functiontxt">
                        <span class="blue">function</span>
                        <span class="yellow">introduction<span class="orange">(){
                        </span></span>
                        </div>
                        <div id="functiontxt2">
                        <span class="blue">let</span>
                        <span class="lightblue">dev = {</span>
                        <div id="functiontxt3">
                            <span class="lightblue">name: </span>
                            <span class="brown">"Tuomas Korpi"</span><br>
                            <span class="lightblue">age: </span>
                            <span class="brown">"29"</span><br>
                            <span class="lightblue">country: </span>
                            <span class="brown">"Finland"</span><br>
                            <span class="lightblue">city: </span>
                            <span class="brown">"Kuopio"</span><br>
                        </div>
                        <span class="lightblue">}</span>;
                        <div id="functiontxt4">
                            <span class="nospace"><span class="lightblue">console</span>.
                            <span class="yellow">log</span>
                            <span class="purple">(</span></span>
                            <span class="brown">`Hello World! I am</span>
                            <span class="nospace"><span class="blue">${</span>
                            <span class="lightblue">dev.name</span>
                            <span class="blue">}</span></span>
                            <span class="brown"> \</span><br>
                            <span class="brown">from </span>
                            <span class="nospace"><span class="blue">${</span>
                            <span class="lightblue">dev.city</span>
                            <span class="blue">}</span>
                            <span class="brown">,</span></span>
                            <span class="nospace"><span class="blue">${</span>
                            <span class="lightblue">dev.country</span>
                            <span class="blue">}</span>
                            <span class="brown">.`</span>
                            <span class="purple">)</span></span>;
                        </div>
                        </div>
                        <div id="functiontxt5">
                        <span class="orange">}</span>
                        </div>
                    <div id="functiontxt6">
                        <span class="nospace"><span class="yellow">introduction</span>
                        <span class="orange">()</span>;<br>
                        <span class="lightblue">tuomas</span>.
                        <span class="yellow">webpage</span>
                        <span class="orange">()</span>;</span>
                    </div>
                </div>
        </div>
        
        <div class="output" id="output">
            <div class="outputbox" id="outputbox">
                <div id="outputtxt"><span class="outtitle">CONSOLE</span><br><br><div class="flex-cont horizontal">Click top left arrow (<div class="smallrun"></div>) to run the code! </div></div>
            </div>
        </div>
    </div>
    <div class="asideProject" id="asideProject">
        <div class="projectContainer">
            <div id="p1" class="project project1 box">
                <div class="minimize"></div>
                IOT TABLE TENNIS
                <div class="projectPage">
                    <p>This is version 2. Documentation of version 1 of this project is available here: 
                        <a href="https://www.researchgate.net/publication/338683456_Use_of_an_IoT_Technology_to_Analyse_the_Inertial_Measurement_of_Smart_Ping-pong_Paddle
                        ">Research Gate Link</a>
                
                    </p>
                    <iframe class="projectImg" width="70%" height="415" src="https://www.youtube.com/embed/t19XiV-uCdM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>                    <p>
                        This research and development is continuation from previous school project “Smart ping pong paddle, Orientation measurement of game equipment”. In that first version the theory was there but final product lacked desired functionality regarding stable orientation and paddle angles.
                        In the second version those basic problems are taken care of by changing the inertial measure-ment unit (IMU) and some additional features are researched like ball hit detection, paddle posi-tion measurement and ball tracking with machine learning. 
                    </p>
                    <p>
                        Overall system block diagram is still the same so only the parts that are changed are covered more carefully. Report is structured so that each feature is covered one by one. Paddle position measurement is addressed in “Related works” where possibilities of IMU’s 3D position tracking capabilities are researched. Followed by “Orientation measurement” where we cover the new IMU sensor, theory of rotation in three dimensions and implementation both in MCU’s Arduino code and Unity’s C# code. Orientation and paddle angle measurement are on the main focus here, but after that comes “Hit detection” where the use of piezo tap sensor is considered.
                    </p>
                    <h1>2 Related works</h1>
                    <p>
                        In his thesis “Position Estimation Using an InertialMeasurement Unit Without TrackingSystem” Johnny Leporcq from Aalto university tries to estimate accurate position of an IMU sensor com-posed of accelerometer, gyroscope and magnetometer without any additional tracking system or expensive calibration equipment. Usually GPS is used in pair with IMU to correct position drifting.
                        Precise calibration of each sensor plays crucial part in sensor fusion position estimation and Ex-tended Kalman Filter and Particle swarm optimization algorithms are used for that. To get position velocity is needed and it is obtained by integration of acceleration with respect to time and then again by integrating velocity with respect to time position is calculated. After testing this in prac-tice author concludes that is hardly possible to get reliable position estimation without external tracking system because any small noise or bias or mismatch between accelerometer and gravity signal will cause huge errors after the double integration process. 

                    </p>
                    <p>
                        Due to limitations expressed in the thesis, three dimensional position tracking does not seem via-ble option for Smart ping pong paddle project. Adding external GPS sensor to the system is not good idea either since adding more hardware would affect the playability of the game itself. 
                    </p>
                    <h1>3 Orientation measurement</h1>
                    <h2>3.1	Euler angles and quaternions</h2>
                    <p>
                        Euler angles store orientation using three angles. These three angles correspond to three object space-axis: Yaw and pitch define which way object is facing, yaw being the horizontal circle and pitch being the vertical circle. Roll measures the amount of twist. There are some disadvantages with Euler angles when defining full 360-degree rotation in every axis, because the three angles are not completely independent from each other so the representation for given orientation is not unique and interpolating between two orientations is problematic. For that reason, in this project Euler angles are only used to show the angle on the screen since they are easy to understand by humans. Actual object orientation is defined by quaternions.
                    </p>
                    <p>
                        Quaternions avoid problems seen in Euler angles by using four numbers to express an orienta-tion. Quaternion can be described as 4D complex number that expresses angular displacement by using an axis of rotation and an amount of rotation on that axis and consist of scalar and vector components. Unity has functions to define quaternion based on the four values between 0 to 1 (or -1) from the orientation sensor and to transform object based on that. 
                    </p>
                    <h2>3.2 Adafruit BNO055 absolute orientation sensor</h2>
                    <p>In the previous version with MPU6050 IMU sensor the sensor fusion and accurate calibration cal-culations turned out to error sensitive and challenging task, so when BNO055 9-DOF Absolute Orientation IMU Fusion Breakout Board does all those calculation on board with the help of ARM Cortex-M0 based processor, it is obvious choice for this project since the size is still small enough. </p>
                    <p>Like MPU6050 sensor, BNO055 transfers data between transmitter MCU (Wemos D1 mini) via I2C connection. BNO055’s power 3.3-5.0V, ground, SDA, and SCL are connected to corresponding GPIOs.</p>
                    <p>Calibration is done on in the board every time it is powered on. Gyroscope, accelerometer and magnetometer all need valid calibration data that is gathered by moving the sensor to different positions. A “calibration dance” is required to get the sensor fully calibrated and it takes under a minute. Full (3) calibration value for gyroscope is achieved when sensor is still in any position. Magnetometer may need figure 8 motion in three dimensions to be fully calibrated. Accelerometer is most time consuming one since the sensor needs to be placed in six standing positions, one per side/face. </p>
                    <h2>3.3 Arduino IDE </h2>
                    <p>Compared to earlier Arduino IDE code this one is more simple, since Adafruit sensor and BNO055 libraries make obtaining pre-processed orientation data and calibration state values easy. For ex-ample, next short code snippet is all you need to get one of four needed quaternion values:</p>
                    <p><i>bno.begin();<br>
                        imu::Quaternion quat = bno.getQuat();<br>
                        String sensorValue = String(quat.w(), 2);
                        </i></p>
                    <p>Rest of the Arduino code concerning vibration motor and data transformation via WLAN are pretty much the same with the earlier version. There are two Arduino scripts “transmitter.ino” and “re-ceiver.ino” for each MCU.</p>
                    <h2>3.4 Unity game engine</h2>
                    <p>The “motion2.cs” script handles object rotation in Unity. First it reads data array that receiver MCU wrote to the serial port. It splits array to quaternion and calibration values. Quaternions need to be normalized because floating-point precession errors will cause it to not be unit length. So next in the code normalization is done: </p>
                    <p><i>float factor = Mathf.Sqrt(Mathf.Pow(x, 2f) + Mathf.Pow(y, 2f) + Mathf.Pow(z, 2f) + Mathf.Pow(w, 2f));<br>
                        xNorm = x / factor;<br>
                        yNorm = y / factor;<br>
                        zNorm = z / factor;<br>
                        wNorm = w / factor;
                     </i></p>
                     <p>	Unity engine has method to create rotation quaternion and transform object function with that:</p>
                    <p><i>Quaternion quat = new Quaternion(xNorm, zNorm, yNorm, wNorm);<br>
                        transform.rotation = Quaternion(quat);
                    </i></p>
                    <p>Other unity scripts included do following things: Get quaternion, calibration and angle values on the screen, make it possible to select available COM-port from dropdown menu, and rotate camera manually with arrow keys. That camera rotation is for last adjustment after the calibration to get the view just right. </p>
                    <p>There are also some scripts for hit detection, that I go over briefly since the concept was aban-doned from the last prototype.</p>
                    <h1>4 Hit detection</h1>
                    <p>Hit detection was an idea to connect piezo disc sensor to the setup and put the sensor on the paddle to make pop-up text indicator appear on the screen when ball hits. Piezoelectric effect measures the electrical potential caused by mechanical force like ball hitting the paddle, where it is easily read with MCU’s analog read pin. Pull down resistor needs to be added between sensor and analog pin. Bigger the resistor more sensitive it is to the hits. Thresh hold was added in Ar-duino code to pick up right amount of force. </p>
                    <p>Concept gave good results when piezo sensor was only sensor connected to the MCU. But when piezo sensor and orientation sensor were both connected to Wemos D1 mini MCU both sensors started behaving unreliably. MCU might not be able to deliver needed amount of power to sensors at the same time. To keep orientation reliable, hit detection idea was scrapped. Adding more sen-sors to the setup is not good idea anyways since machine learning may be able to gather that in-formation and more.</p>
                    <h1>5 RESULTS AND CONCLUSION</h1>
                    <p>With new orientation sensor set goal of stable object rotation and angle information was success-ful and new avenues for IoT in table tennis was researched. Machine learning and computer vi-sion seems to be a potential direction for information gathering in sports in general. </p>
                    <p>Here is explanation how Smart Ping Pong Paddle v2 operates: </p>
                    <ul>
                        <li>1.	Connect receiver to PC’s USB</li>
                        <li>2.	Open Unity Application</li>
                        <li>3.	Select COM-port where receiver is connected</li>
                        <li>4.	Switch power on the paddle</li>
                        <li>5.	Vibration motor indicates when paddle MCU has WLAN connection with receiver MCU</li>
                        <li>6.	Calibrate by moving the paddle around</li>
                        <li>7.	Adjust camera with arrow keys if needed</li>
                        <li>8.	Play with it</li>
                    
                    </ul>
                    <h1>6 References</h1>
                    <p>Bno055 sensor:
                        https://learn.adafruit.com/adafruit-bno055-absolute-orientation-sensor
                        </p>
                    <p>Johnny Leporcq, Position Estimation Using an InertialMeasurement Unit Without TrackingSystem:
                        
                    <a href="https://aaltodoc.aalto.fi/bitstream/handle/123456789/32426/master_Leporcq_Johnny_2018.pdf?sequence=1&isAllowed=y">link</a>
                        </p>
                    <p>Book for orientation theory:
                        3D math primer for graphics and game development by Dunn and Parberry, 2011 Taylor and Fran-cis Group, LLC
                        </p>
                    <p>Piezo disc video:
                        https://www.youtube.com/watch?v=sqHJ9tDC9IM
                        </p>
                </div>
            </div>
            <div id="p2" class="project project2 box">
                <div class="minimize"></div>
                AI TABLE TENNIS
                <div class="projectPage">
                    <p>
                        Utilizing deep learning, more specifically computer vision object detection and tracking is the next logical direction for this project as it does not demand modification of a gaming equipment or af-fect the gameplay in any way. 
                    </p>
                    <p>
                    Development paths for such computer vision AI could be ball speed estimation, ball trajectory path estimation, and collection of all kinds of statistics about the game like times each player hit the ball to the net or over the table.
                    </p>
                    <p>
                    Many of those features are built on the detection of the ball from the video so model was trained using “You only look once” (YOLO) real-time object detection system. Custom dataset was made by taking 200 frames out of 3 different ITTF table tennis videos and labeling ball from each frame. Model training was done following the steps from Youtube video “YOLOv3 in the CLOUD: Install and Train Custom Object Detector” by The AI Guy, so the details are not repeated here. 
                    </p>
                    <p>
                    Model was able to detect the ball with high enough accuracy for all the other features to be pos-sible in theory. This was not yet deep dive into the deep learning but rather proof of concept for the future research and development. 
                    </p>
                    <iframe class="projectImg" width="70%" height="415" src="https://www.youtube.com/embed/UApt6UGgiuA" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    <h2>References</h2>
                    <p>YoloV3 model training video:
                        https://www.youtube.com/watch?v=10joRJt39Ns
                    </p>
                </div>
            </div>
            <div id="p3" class="project project3 box">
                <div class="minimize"></div>
                IOT SCALE FOR WASTE BINS
                <div class="projectPage">
                    <p>Waste management companies sometimes bills their customers by the weight of the waste, also it is not legal to put over 60 kilos into the waste bins for safety reasons. It was decided to use IoT technology to inno-vate solutions for waste weight measurement and built a prototype for that. </p>
                    <p>Prototype for the scale was built that would measure the weight of the bin and send the data to the client. Four load cell sensors were used that handle 50 kg each so maximum weight allowed is 200 kg. Load cells were connected, using Wheatstone bridge, to a analog to digital converter (HX711) that converts pressure on the sensors to voltage calculated in the microchip. Microchip used was ESP8266 WLAN module based chip (ESP8266 NodeMCU). It analyses the information coming from the converter and also sends it to a website by connecting to the internet and Cloud services. All these task are programmed into a microchip using Arduino IDE software.</p>
                    <p><img class="projectImg" src="img/IoT-scale-wiring.png" width="70%" height="200px"></p>
                    <p>As a Cloud platform, Google Firebase is used. Firebase provides NoSQL real time database with website hosting, so data is updated almost instantly to the webpage where it is visualized and plotted into a graph. Data can be accessed with computer or mobile with internet connection. ESP8266 board is powered with rechargeable battery through micro USB port. It would be possible also to power them with basic mobile phone charger using AC, as some of the waste bin shelters have electricity for lights and such.</p>
                    <p><img class="projectImg" src="img/dataVisualisation.png" width="70%" height="200px"></p>
                    <p>Firebase Cloud services provide hosting only, so website still has to be built from the scratch. Website for the prototype (FIG 2.) was built using basic HTML, CSS and Javascript. Firebase is free to use to a point. If you would like to store more than 1 Gb of data per month it should pe updated to a paid version. </p>
                    <p>Working prototype was displayed and demonstrated in Savonia University’s IPD fair at the end of the course, where all groups showed their projects.</p>
                    <p><img class="projectImg" src="img/scale.jpg" width="70%" height="200px"></p>
                </div>
            </div>
            <div id="p4" class="project project4 box">
                <div class="minimize"></div>
                ANDROID DATASET RECORDER
                <div class="projectPage">
                    <p>To train accurate machine learning model a large variety of voice samples from different people is required. Each audio clip needs to be in separate “.wav”-file in the directory with corresponding command as directory name. Splitting words out of long audio files and categorizing them after recording is time consuming task.</p>
                    <p>Mobile application is developed to do the file classification at the same time with recording. With the app it is easy and fast to go around and ask people to say the commands. Dataset recording app is build for Android platform using Android Studio with Java. </p>
                    <p>Application functionality explained:</p>
                    <ol>
                        <li>
                            	Select a word 
                        </li>
                        <li>
                            	Press record 
                        </li>
                        <li>
                            	Say the word 
                        </li>
                        <li>
                            	Press stop 
                        </li>
                        <li>
                            	Audio is saved to [SD CARD root] / Audio / [word]. Audio files go to directory with corresponding word as name 
                        </li>
                        <li>
                            	You can play it back to see if its good, if not delete 
                        </li>
                        <li>
                            	When you want to transfer files from phone to PC press “zip and delete all” button. It makes zip file (PATH: [SD CARD root] / zippedAudio) with all recorded audio in right folders and deletes original audio files, so you can continue recording and there is no duplicates when you make zip file again. 
                        </li>
                        <li>
                            	Open Google Drive app on phone and add zip file there
                        </li>
                    </ol>
                    <img class="projectImg" src="img/datasetrecorder.jpg" width="200px" height="300px" >
                    <p>Source code for the app is available <a href="https://github.com/korpidigital/datasetRecorder">HERE</a></p>

                </div>
            </div>
            <div id="p5" class="project project5 box">
                <div class="minimize"></div>
                MY WEBSITE
                <div class="projectPage">
                    <p>This website is for my projects, but it is itself a project worth mentioning. It is build with vanilla Javascript, HTML and CSS. Source code <a href="https://github.com/korpidigital/kopale.github.io">HERE</a> at Github.</p>
                </div>
            </div> 
            <div id="p6" class="project poject6 box">
                <div class="minimize"></div>
                AI VOICE COMMANDS
                <div class="projectPage"></div>
            </div>
            <div id="p7" class="project project7 box">
               
                <div class="minimize"></div>
                 CUSTOMER WEBSITE 1
                <div class="projectPage"></div>
            </div>
            <div id="p8" class="project project8 box">
                <div class="minimize"></div>
                <div class="projectPage"></div>
            </div>
            
        </div>
    </div>
</div>

<div class="footer" id="footer">
    
    <div class="footerIcos"><a href="https://github.com/korpidigital"><img class="footerIco githubIco" width="100%" src="./icons/github.svg"></a></div>
    <div class="footerIcos"><a href="https://www.youtube.com/channel/UCuCUJh7piqa8mjF2yfNmmFg/videos"><img  class="footerIco youtubeIco"width="100%" src="./icons/youtubeIco.svg"></a></div>
    <div class="footerIcos"><a href="https://www.researchgate.net/profile/Tuomas_Korpi/research"><img  class="footerIco rgIco"width="100%" src="./icons/rg.svg"></a></div>

</div>
    
</div>
<script src="./main.js"></script>
</body>